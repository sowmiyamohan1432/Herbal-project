<!-- warranties.component.html -->
<div class="container">
  <h2>Warranties</h2>
  
  <div class="all-warranties">
 
    
    <div class="table-controls">
      <div class="left-controls">
        <span>Show</span>
        <select [(ngModel)]="entriesPerPage" (change)="onEntriesChange()">
          <option value="25">25</option>
          <option value="50">50</option>
          <option value="100">100</option>
        </select>
        <span>entries</span>
        
        <button class="btn btn-export" (click)="exportToCSV()">
          <i class="fa fa-file-csv"></i> Export CSV
        </button>
        
        <button class="btn btn-export" (click)="exportToExcel()">
          <i class="fa fa-file-excel"></i> Export Excel
        </button>
        
        <button class="btn btn-export" (click)="printTable()">
          <i class="fa fa-print"></i> Print
        </button>
        
        <button class="btn btn-export">
          <i class="fa fa-columns"></i> Column visibility
        </button>
        
        <button class="btn btn-export" (click)="exportToPDF()">
          <i class="fa fa-file-pdf"></i> Export PDF
        </button>
      </div>
      
      <div class="right-controls">
        <div class="search-container">
          <input type="text" [(ngModel)]="searchText" (input)="applyFilter()" placeholder="Search...">
        </div>
        
        <button (click)="openModal()" class="btn btn-primary add-btn">
          <i class="fa fa-plus"></i> Add
        </button>
      </div>
    </div>
    
    <!-- Table displaying warranties -->
    <div class="table-responsive">
      <table>
        <thead>
          <tr>
            <th>Name <i class="fa fa-sort"></i></th>
            <th>Description <i class="fa fa-sort"></i></th>
            <th>Duration <i class="fa fa-sort"></i></th>
            <th>Action <i class="fa fa-sort"></i></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngIf="displayedWarranties.length === 0">
            <td colspan="4" class="no-data">No data available in table</td>
          </tr>
          <tr *ngFor="let item of displayedWarranties">
            <td>{{ item.productName }}</td>
            <td>{{ item.description }}</td>
            <td>{{ item.durationValue }} {{ item.durationUnit }}</td>
            <td class="actions">
              <button (click)="openModal(item.id)" class="btn btn-edit">
                <i class="fas fa-pencil-alt"></i> Edit
              </button>
              <button (click)="deleteWarranty(item.id)" class="btn btn-delete">
                <i class="fas fa-trash-alt"></i> Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <div class="pagination-container">
      <div class="showing-entries">
        Showing {{ (currentPage - 1) * entriesPerPage + 1 }} to {{ showingEnd }} of {{ filteredWarranties.length }} entries
      </div>
      <div class="pagination-controls">
        <button [disabled]="currentPage === 1" (click)="previousPage()" class="btn btn-pagination">Previous</button>
        <button [disabled]="currentPage === totalPages" (click)="nextPage()" class="btn btn-pagination">Next</button>
      </div>
    </div>
  </div>
  
  <!-- Add/Edit Warranty Modal -->
  <div *ngIf="isModalOpen" class="modal">
    <div class="modal-content">
      <h2>{{ selectedWarrantyId ? 'Edit' : 'Add' }} Warranty</h2>
      
      <form (ngSubmit)="saveWarranty()">
        <div class="form-group">
          <label><strong>Name:*</strong></label>
          <input type="text" [(ngModel)]="warranty.productName" 
                 name="productName" placeholder="Name" required>
        </div>
        
        <div class="form-group">
          <label><strong>Description:</strong></label>
          <textarea [(ngModel)]="warranty.description" 
                    name="description" placeholder="Description"></textarea>
        </div>
        
        <div class="divider"></div>
        
        <div class="form-group">
          <label><strong>Duration:*</strong></label>
          <div class="duration-container">
            <input type="number" [(ngModel)]="warranty.durationValue" 
                   name="durationValue" placeholder="0" min="0" required>
            <select [(ngModel)]="warranty.durationUnit" name="durationUnit" required>
              <option value="" disabled selected>Please Select</option>
              <option value="days">Days</option>
              <option value="months">Months</option>
              <option value="years">Years</option>
            </select>
          </div>
        </div>
        
        <div class="form-actions">
          <button type="submit" class="btn btn-save">Save</button>
          <button type="button" class="btn btn-close" (click)="closeModal()">Close</button>
        </div>
      </form>
      
      <div class="footer">
      </div>
    </div>
  </div>
</div>